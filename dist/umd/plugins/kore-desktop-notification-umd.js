!function(A,V){"object"==typeof exports&&"object"==typeof module?module.exports=V():"function"==typeof define&&define.amd?define([],V):"object"==typeof exports?exports.KoreDesktopNotificationPluginSDK=V():A.KoreDesktopNotificationPluginSDK=V()}(self,(()=>(()=>{"use strict";var A={d:(V,o)=>{for(var i in o)A.o(o,i)&&!A.o(V,i)&&Object.defineProperty(V,i,{enumerable:!0,get:o[i]})},o:(A,V)=>Object.prototype.hasOwnProperty.call(A,V),r:A=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})}},V={};A.r(V),A.d(V,{KoreDesktopNotificationPlugin:()=>o});const o=function(){function A(){this.name="KoreDesktopNotificationPlugin ",this.config={},this.isTabActive=!0,this.notificationSound="data:audio/mp3;base64,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zAAsn0RSRtagYAuIngKTAwGaIivmbabacEwyMwBM8RZuAjDHziuNGS00SpIWLiRqtQ3/+5Bk+4Hz2WjQ+4+kKAAADSAAAAEoZaM57u31qAAANIAAAARaubXxcM5xnT/k4ECrXOln626P9Ymoyf84BTGikP/6gmIPhw8////6/6BGUrUQ3///o7t648aACIsySkldHGJGyt2mD1WQY0yJxAONkjeUgJmZmOHMAbW1v6zEnzPOtWZG3UQUe/5GDB+s9+WfNv8olX+pAEIyESNm//cZ8KwI41S/////zh7EyrzPywACj9EAGCzyt2zWacgFsypOVRb/WiOhwOalvhYAO6J0gJGSPzRQQTB9lS0W5MayKk71EOK38ag899vyy/Kn+Yt/Y2IIRczJ3/9kwxoCk0hxfV/////kONa9EaDIALDAAAu4AAAC/cOxGCmi1LpeYZAEwfCgwXAQwvHI5lQUw5AYvSy6Ky6zR3aZwZ9BJST1CPhvOZESIk/Mkv4RDCS809tbCmjbpHBQb/zFv6aAauIsxk/bqWgmYDlgV/AfgSHxBwZon/////VrywRX///rgImZIAA/oAAABu7hG1MOoxPCXt67ZEPQcGQoawLDhwBulHb/+2Bk2oTzTlBU+0lsMAAADSAAAAEK1TVV7RpwoAAANIAAAAS2OjOxYdBlmx9JYpq+j9v4d416f9cokLZZHf6/+susr6vqWcI8CEgG9SfDznn/////9Wok///+WoG+AAl7AG+oSLSR/14St9GViACDDELxIDzCweD1hgzFYCBYD1+OXFJ92IYttyokVJqN6QXCDCZTP679ajEIg4PurNOps6sdAZVA3KAZZQ///U7s/O+6lmQxoGAWYBq0JhAAQRBIiJsi///9f1fqqJUcpf//////y7WYiZhQAFfwAAAos8951IpK4bfWRt3jT2LAM9BJDOAxCMj3JlJim9sGRWf3cp7cfnL/+2Bk6oDy81DUe2mkGAAADSAAAAEOVUM/4PaHoAAANIAAAASbtmAjIqGaamq09mTQwyQSdW/9cahC1OLc/////69AzKYDzAF/YZdFSWg3/////XsQjf//6Zi7lzAAL+AS29luAkTkbS1rVExe7jzrOi3UwgdBIYh+Ya0DoSYRDHXFz73foER8A8jZeTDSIrp1HXtFlJWZFaAhEIOTa3+sdRElsYlX////+io2kNIgAacA3pwMsk4TwOu//+K///9ygAAJUAKOBaGAD3/JkuLMBumBEhzQtyAPSGG5ofZy4YGyWk/sIIKZf/nERN7/////6mHioAWCnEGJj8AADjgaKqBpJFr/+2Bk8oHy1lDReFyh2AAADSAAAAEPFZc5oXanoAAANIAAAASU1UxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+1Bk+QHzKFDQ+xyjqAAADSAAAAEM9PFD7TKQ4AAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuOTku//sgZOiD8c88UPogVZgAAA0gAAABAWgrPoGBIWAAADSAAAAENVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EGTdj/AAAH+AAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQZN2P8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xBk3Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EGTdj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQZN2P8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xBk3Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EGTdj/AAAGkAAAAIAAANIAAAAQAAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQZN2P8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUQUcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/w=="}return A.prototype.onHostCreate=function(){this.onInit()},A.prototype.onInit=function(){var A=this,V=this;"default"===Notification.permission&&Notification.requestPermission(),document.addEventListener("visibilitychange",(function(A){"visible"==document.visibilityState?V.isTabActive=!0:V.isTabActive=!1})),V.hostInstance.on("onWSMessage",(function(o){var i,t,e,a,n,g,s,l,d,B,u,w,c,S,D,M,I,Q,m;"agent_connected"===(null===(t=null===(i=o.messageData)||void 0===i?void 0:i.message)||void 0===t?void 0:t.type)&&new Audio(V.notificationSound).play();if("bot_response"===(null===(e=o.messageData)||void 0===e?void 0:e.type)&&"live_agent"===(null===(l=null===(s=null===(g=null===(n=null===(a=o.messageData)||void 0===a?void 0:a.message[0])||void 0===n?void 0:n.component)||void 0===g?void 0:g.payload)||void 0===s?void 0:s.payload)||void 0===l?void 0:l.template_type)&&(null===(c=null===(w=null===(u=null===(B=null===(d=o.messageData)||void 0===d?void 0:d.message[0])||void 0===B?void 0:B.component)||void 0===u?void 0:u.payload)||void 0===w?void 0:w.payload)||void 0===c?void 0:c.text)){if("granted"!==Notification.permission)return;var f,E={body:null===(Q=null===(I=null===(M=null===(D=null===(S=o.messageData)||void 0===S?void 0:S.message[0])||void 0===D?void 0:D.component)||void 0===M?void 0:M.payload)||void 0===I?void 0:I.payload)||void 0===Q?void 0:Q.text,sound:A.notificationSound,requireInteraction:!1,onclick:function(A){A.target.close()}};if(!V.isTabActive){if(null===(m=o.messageData.author)||void 0===m?void 0:m.firstName){var p=o.messageData.author.firstName+" "+o.messageData.author.lastName;f=new Notification("New message from "+p,E)}else f=new Notification("You have a new notification.",E);new Audio(A.notificationSound).play()}f&&(f.onclick=function(A){window.parent.focus(),f.close()})}}))},A}();return V})()));